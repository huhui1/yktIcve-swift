//
//  NetworkService.swift
//  yktIcve
//
//  Created by 尤增强 on 2018/8/24.
//  Copyright © 2018年 zqyou. All rights reserved.
//
import RxSwift
import RxCocoa
import ObjectMapper

class NetworkService {



    //教师获取课程列表
    func loadCourseList(_ parmes:[String : Any]) -> Driver<[CourseInfoModel]>{

        return HttpbinProvider.rx.request(.getCourseData(parmes))
            .mapObject(CourseInfoModelList.self)
            .map({$0.courseInfoModelList ?? []})
            .asObservable()
            .delay(1, scheduler: MainScheduler.instance)
            .asDriver(onErrorDriveWith: Driver.empty())

    }

    //获取我 - 消息列表
    func loadNewsList(_ parmes :[String : Any]) -> Observable<[NewsModel]> {
       
        return HttpbinProvider.rx.request(.getUserNewsList(parmes))
            .mapObject(NewsModelList.self)
            .map{ $0.newsModelList ?? [] }
            .asObservable()
            .delay(2, scheduler: MainScheduler.instance)
    }


    /// 修正学生登陆状态
    ///
    /// - Parameter parmes: 传输字典类型
    /// - Returns:
    //    func  changeSignType(_ parmes :[String:String]) -> Observable<Int>{
    //
    //      return HttpbinProvider.rxt
    //    }
    //MVVM   KVO


}
