//
//  courseWareViewTopic.swift
//  云课堂2
//
//  Created by 尤增强 on 2018/5/29.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit
import SwiftyJSON
class courseWareViewTopic: UITableViewCell {
 
    @IBOutlet weak var labelTitle: UILabel!
    @IBOutlet weak var _line: UILabel!
    
    @IBOutlet var LineHt: NSLayoutConstraint!
    @IBOutlet var lineWidth: NSLayoutConstraint!
    @IBOutlet weak var topicbtn: UIButton!
    @IBOutlet var LineTop: NSLayoutConstraint!
    
    @IBOutlet var lineLeft: NSLayoutConstraint!
    
    @IBOutlet weak var labelTitleConstraints: NSLayoutConstraint!
    
    override func awakeFromNib() {
        super.awakeFromNib()
        // Initialization code
    }
    override func layoutSubviews() {
        super.layoutSubviews()
        self._line.textColor = UIColor.bg
        topicbtn.setTitle("\u{e607}", for: .normal)
        topicbtn.setTitle("\u{e604}", for: .selected)
        topicbtn.setTitleColor(UIColor.lightGray, for: .normal)
         topicbtn.setTitleColor(UIColor.lightGray, for: .selected)
        topicbtn.titleLabel?.font = UIFont.init(name: "iconfont", size: 18)

    }

    //MOOC课件下使用
    func setModel(courseTopicModule:courseTopic){
       self.labelTitle.numberOfLines = 2

        self.topicbtn.isSelected = courseTopicModule.isUnfold
        let attributesString = NSMutableAttributedString.init(string :courseTopicModule.title)
        //创建NSMutableParagraphStyle
        let paraghStyle = NSMutableParagraphStyle()
        //设置行间距（同样这里可以设置行号，间距，对齐方式）
        paraghStyle.lineSpacing = 5
        //添加属性，设置行间距
        attributesString.addAttributes([NSAttributedStringKey.paragraphStyle : paraghStyle], range: NSMakeRange(0, courseTopicModule.title.count))
        self.labelTitle.attributedText = attributesString

        self.selectionStyle = .none
    }

    //ZJY课件下使用
    func setZJYModel(courseTopicModule:zjycourseTopic){
        self.labelTitle.numberOfLines = 2

        self.topicbtn.isSelected = courseTopicModule.isUnfold
        let attributesString = NSMutableAttributedString.init(string :courseTopicModule.title)
        //创建NSMutableParagraphStyle
        let paraghStyle = NSMutableParagraphStyle()
        //设置行间距（同样这里可以设置行号，间距，对齐方式）
        paraghStyle.lineSpacing = 5
        //添加属性，设置行间距
        attributesString.addAttributes([NSAttributedStringKey.paragraphStyle : paraghStyle], range: NSMakeRange(0, courseTopicModule.title.count))
        self.labelTitle.attributedText = attributesString

        self.selectionStyle = .none
    }
    //MOOC大纲下使用
    func setJson(data:JSON){

        self.labelTitle.numberOfLines = 2

        self.topicbtn.isHidden = true

        if(data["DesignLevel"].intValue == 1 || (data["DesignLevel"].intValue == 3 && data["CellType"].intValue != 4 )){
            self._line.isHidden = true
        }else if data["DesignLevel"].intValue == 3 && data["CellType"].intValue == 4{
            self._line.isHidden = false
            self.lineLeft.constant = CGFloat(8 * data["DesignLevel"].intValue)
        }
        let str = data["Title"].stringValue.replacingOccurrences(of: "&nbsp;", with: "")
        self.labelTitleConstraints.constant = CGFloat(10 * data["DesignLevel"].intValue)
        if data["DesignLevel"].intValue == 3 && data["CellType"].intValue != 4 {
            self._line.isHidden = false
            self.LineHt.constant = 28
            self.lineLeft.constant = 25
            self.lineWidth.constant = 43
            self.LineTop.constant = 10
            self.labelTitleConstraints.constant = 70
            self._line.textColor = UIColor.bg
            self._line.layer.masksToBounds = true
            self._line.layer.borderWidth = 1
            self._line.layer.borderColor = UIColor.bg.cgColor
            self._line.layer.masksToBounds = true
            self._line.layer.cornerRadius = 6
            self._line.textAlignment = .center
            self._line.text = data["ResourceType"].stringValue
            self._line.font = UIFont.systemFont(ofSize: 14)
            self.labelTitle.font = UIFont.systemFont(ofSize: 14)
        }
        let attributesString = NSMutableAttributedString.init(string :str)
        //创建NSMutableParagraphStyle
        let paraghStyle = NSMutableParagraphStyle()
        //设置行间距（同样这里可以设置行号，间距，对齐方式）
        paraghStyle.lineSpacing = 5
        //添加属性，设置行间距
        attributesString.addAttributes([NSAttributedStringKey.paragraphStyle : paraghStyle], range: NSMakeRange(0, str.count))
        self.labelTitle.attributedText = attributesString
        self.selectionStyle = .none
    }

    //Zyk课件下使用
    func setZykModel(courseTopicModule:ZykcourseTopic){
        self.labelTitle.numberOfLines = 2
        self.topicbtn.isSelected = courseTopicModule.isUnfold
        let attributesString = NSMutableAttributedString.init(string :courseTopicModule.title)
        //创建NSMutableParagraphStyle
        let paraghStyle = NSMutableParagraphStyle()
        //设置行间距（同样这里可以设置行号，间距，对齐方式）
        paraghStyle.lineSpacing = 5
        //添加属性，设置行间距
        attributesString.addAttributes([NSAttributedStringKey.paragraphStyle : paraghStyle], range: NSMakeRange(0, courseTopicModule.title.count))
        self.labelTitle.attributedText = attributesString
        self.selectionStyle = .none
    }
    
    override func setSelected(_ selected: Bool, animated: Bool) {
        super.setSelected(selected, animated: animated)

        // Configure the view for the selected state
    }
   

}
