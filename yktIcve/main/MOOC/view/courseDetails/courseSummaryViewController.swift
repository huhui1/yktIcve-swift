//
//  courseSummaryViewController.swift
//  云课堂2
//
//  Created by cc on 2018/5/29.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit
import Alamofire
import SwiftyJSON

class courseSummaryViewController: UIViewController,UIScrollViewDelegate {

    override func viewDidLoad() {
        super.viewDidLoad()
        self.view.backgroundColor = UIColor.white
        self.setUI()

        // Do any additional setup after loading the view.
    
    }

    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    
    
    
    func setUI(){


        self.scrollView.frame = self.view.frame
        self.scrollView.delegate = self
        self.view.addSubview(scrollView)
        
        //隐藏滚动条
        scrollView.showsVerticalScrollIndicator = false
        
        scrollView.showsHorizontalScrollIndicator = false
        self.scrollView.addSubview(self.lab_request)
        self.scrollView.addSubview(self.lab_rule)
        self.scrollView.addSubview(self.lab_ready)
        self.scrollView.addSubview(self.lab_reference)
        self.scrollView.addSubview(self.readyContent)
        self.scrollView.addSubview(self.requestContent)
        self.scrollView.addSubview(self.ruleContent)
        self.scrollView.addSubview(self.referenceContent)
        //证书要求
        self.lab_request.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width)
            make.height.equalTo(40)
            make.top.equalTo(0)
            make.left.equalTo(0)
        }
        self.requestContent.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width - 30)
            make.top.equalTo(self.lab_request.snp.bottom)
            make.left.equalTo(20)
        }

        //评定规则
        self.lab_rule.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width)
            make.height.equalTo(40)
            make.top.equalTo(self.requestContent.snp.bottom)
            make.left.equalTo(0)
        }
        self.ruleContent.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width - 30)
            make.top.equalTo(self.lab_rule.snp.bottom)
            make.left.equalTo(20)
        }
       
        //预备知识
        self.lab_ready.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width)
            make.height.equalTo(40)
            make.top.equalTo(self.ruleContent.snp.bottom)
            make.left.equalTo(0)
        }
        self.readyContent.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width - 30)
            make.top.equalTo(self.lab_ready.snp.bottom)
            make.left.equalTo(20)
        }
        
        //参考资料
        self.lab_reference.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width)
            make.height.equalTo(40)
            make.top.equalTo(self.readyContent.snp.bottom)
            make.left.equalTo(0)
        }
        self.referenceContent.snp.makeConstraints { (make) in
            make.width.equalTo(UIScreen.main.bounds.width - 30)
            make.top.equalTo(self.lab_reference.snp.bottom)
            make.left.equalTo(20)
        }







    }

    //设置富文本字体
    func setFontOnLabel(){

        self.requestContent.font = UIFont.systemFont(ofSize: 15)
        self.requestContent.textColor = UIColor.gray
        self.ruleContent.font = UIFont.systemFont(ofSize: 15)
        self.ruleContent.textColor = UIColor.gray

        self.readyContent.font = UIFont.systemFont(ofSize: 15)
        self.readyContent.textColor = UIColor.gray

        self.referenceContent.font = UIFont.systemFont(ofSize: 15)
        self.referenceContent.textColor = UIColor.gray
    }

    //动态改变scrollView 高度
    func setScrollViewHeight(){

        var hx = 0
        if(common.share.isX()){
            hx = 130
        }
        let referencehigh = (common.share.getHeightForView(text: self.referenceContent.attributedText!, font: UIFont.italicSystemFont(ofSize: 14), width: width))
        let requesthigh = (common.share.getHeightForView(text: self.requestContent.attributedText!, font: UIFont.italicSystemFont(ofSize: 14), width: width))
        let rulehigh = (common.share.getHeightForView(text: self.ruleContent.attributedText!, font: UIFont.italicSystemFont(ofSize: 14), width: width))
        let readyhigh = (common.share.getHeightForView(text: self.readyContent.attributedText!, font: UIFont.italicSystemFont(ofSize: 14), width: width))
        self.scrollView.contentSize = CGSize.init(width: width, height: height + CGFloat(readyhigh) + CGFloat(referencehigh) + CGFloat(rulehigh) + CGFloat(requesthigh)  - CGFloat(hx))

    }

    

    let width = UIScreen.main.bounds.width
    let height = UIScreen.main.bounds.height
    lazy var scrollView :UIScrollView = {
        let scrollView = UIScrollView.init(frame: self.view.bounds)
        return scrollView
    }()
    lazy var lab_request : UILabel = {
        let lab = UILabel()
        lab.font = UIFont.italicSystemFont(ofSize: 17)
        lab.textColor = UIColor.black
        lab.text = "    证书要求:"
        lab.backgroundColor = UIColor.white
        return lab
    }()
    lazy var requestContent : UILabel = {
        let lab = UILabel()
        lab.backgroundColor = UIColor.white
        lab.numberOfLines = 0
        lab.sizeToFit();
        lab.textAlignment = .center
        return lab
    }()
    lazy var lab_rule : UILabel = {
        let lab = UILabel()
        lab.font = UIFont.italicSystemFont(ofSize: 17)
        lab.textColor = UIColor.black
        lab.text = "    成绩评定规则:"
        lab.backgroundColor = UIColor.white
        return lab
    }()
    lazy var ruleContent : UILabel = {
        let lab = UILabel()
        lab.backgroundColor = UIColor.white
        lab.numberOfLines = 0
        lab.sizeToFit();
        return lab
    }()
    lazy var lab_ready : UILabel = {
        let lab = UILabel()
        lab.font = UIFont.italicSystemFont(ofSize: 17)
        lab.textColor = UIColor.black
        lab.text = "    预备知识:"
        lab.backgroundColor = UIColor.white
        return lab
    }()
    lazy var readyContent : UILabel = {
        let lab = UILabel()
        lab.backgroundColor = UIColor.white
        lab.numberOfLines = 0
        lab.sizeToFit();
        return lab
    }()
    lazy var lab_reference : UILabel = {
        let lab = UILabel()
        lab.font = UIFont.italicSystemFont(ofSize: 17)
        lab.textColor = UIColor.black
        lab.text = "    参考资料:"
        lab.backgroundColor = UIColor.white
        return lab
    }()
    lazy var referenceContent : UILabel = {
        let lab = UILabel()
        lab.backgroundColor = UIColor.white
        lab.numberOfLines = 0
        lab.sizeToFit();
        return lab
    }()

    var request : String = ""{
        willSet
        {

        }
        didSet
        {
            self.requestContent.attributedText = common.share.loadHtml(str: request)
            
        }
    }
    var ready : String = ""{
        willSet
        {

        }
        didSet
        {
            self.readyContent.attributedText = common.share.loadHtml(str: ready)
        }
    }
    var rule : String = ""{
        willSet
        {

        }
        didSet
        {
              self.ruleContent.attributedText = common.share.loadHtml(str: rule)
        }
    }

    var reference : String = ""{
        willSet
        {

        }
        didSet
        {
            self.referenceContent.attributedText = common.share.loadHtml(str: reference)
            self.setScrollViewHeight()
            self.setFontOnLabel()
            
        }
    }
}
