//
//  MineInfoController.swift
//  云课堂2
//
//  Created by cc on 2018/7/18.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit
import SwiftyJSON
import Alamofire

extension MineInfoView{

    //全部设为已读
   @objc func allIsRead(){
        let alertController = UIAlertController(title: "提示",
                                                message:"是否全部设为已读?", preferredStyle: .alert)
        let cancelAction = UIAlertAction(title: "取消", style: .cancel, handler: nil)
    
        let okAction = UIAlertAction(title: "确定", style: .destructive, handler: {
            action in
                let dict = ["userId":Account.defaultAccount.id!]
                XLBallLoading.show(in: self.view)
                Alamofire.request(appAPI.News_setAllNewsIsRead, method: .post, parameters: dict).responseJSON { response in
                    if let value = response.result.value {
                        let json = JSON(value)
                        if(json["code"] == -1){
                            self.myNews?.isRead = true

                        }else{
                            ZKProgressHUD.showMessage(json["msg"].stringValue)
                        }
                        XLBallLoading.hide(in: self.view)
                    }else{
                        ZKProgressHUD.showMessage("网络开小差了")
                        XLBallLoading.hide(in: self.view)
                    }
                }
        })
        alertController.addAction(cancelAction)
        alertController.addAction(okAction)
        self.present(alertController, animated: true, completion: nil)
    }
    
}
