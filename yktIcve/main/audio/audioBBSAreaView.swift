//
//  audioBBSArea.swift
//  云课堂2
//
//  Created by 尤增强 on 2018/7/12.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit

class audioBBSAreaView: UIView {

    var isKJ = false
    var isStu = false
    var openClassId = "";
    var courseOpenId = "";
    var cellId = "";
    let vc5 = KJCourseTeachingTableView()
    let vc1 = courseBBSEvaluationView()
    let vc2 = courseBBSQuestionView()
    let vc3 = courseBBSNoteView()
    let vc4 = courseBBSErrorView()
    var courseBBSRefresh : CourseBBSAction?
  
    override init(frame: CGRect) {
        super.init(frame: frame)
        self.setHeadUI()
      
    }

   
    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

     func setSlideMenu(){


        
        let vc6 = StatisticallearningView()

        vc1.courseOpenId = self.courseOpenId
        vc1.activeType = 1
        vc1.openClassId = self.openClassId
        vc1.cellId = self.cellId
        vc1.courseBBSAction = self.courseBBSRefresh
        vc2.courseOpenId = self.courseOpenId
        vc2.activeType = 2
        vc2.openClassId = self.openClassId
        vc2.cellId = self.cellId
        vc2.courseBBSAction = self.courseBBSRefresh
        vc3.courseOpenId = self.courseOpenId
        vc3.activeType = 3
        vc3.openClassId = self.openClassId
        vc3.cellId = self.cellId
        vc3.courseBBSAction = self.courseBBSRefresh

        vc4.courseOpenId = self.courseOpenId
        vc4.activeType = 4
        vc4.openClassId = self.openClassId
        vc4.cellId = self.cellId
        vc4.courseBBSAction = self.courseBBSRefresh

        vc5.courseOpenId = self.courseOpenId
        vc5.isMusicAndVideo = true
        vc5.openClassId = self.openClassId
        vc5.courseBBSAction = self.courseBBSRefresh

        vc6.cellId = self.cellId
        vc6.isMusicAndVideo = true
        vc6.openClassId = self.openClassId

        var titles = ["评价","问答","笔记","纠错"]
        var arr = [vc1,vc2,vc3,vc4];
        if(!self.isStu){
             titles = ["课堂教学","评价","问答","笔记","纠错","学习统计"]
             arr = [vc5,vc1,vc2,vc3,vc4,vc6];
        }

        var bh :CGFloat = 260
        if common.share.isX(){
            bh = 320
        }
        slideMenu = SlideMenu(frame: CGRect(x:0,y: 160,width:width,height:40), titles:titles, childControllers:arr)
        slideMenu?.backgroundColor = UIColor.white
        slideMenu?.bodyFrame = CGRect.init(x: 0, y:200, width: width, height: height - bh)
        slideMenu?.selectedColor = UIColor(red: 6/255, green: 163/255, blue: 121/255, alpha: 1);
         vc1.f = CGRect.init(x: 0, y:0, width: width, height: height - bh)
         vc2.f = CGRect.init(x: 0, y:0, width: width, height: height - bh)
         vc3.f = CGRect.init(x: 0, y:0, width: width, height: height - bh)
         vc4.f = CGRect.init(x: 0, y:0, width: width, height: height - bh)
        slideMenu?.isFixed = true;
        slideMenu?.indicatorStyle = .followText;
        slideMenu?.titleStyle = .transfrom;
        slideMenu?.line.isHidden = false;
        slideMenu?.scrollToIndex(0)
        self.addSubview(slideMenu!)

    }

    func setHeadUI(){
        self.addSubview(self.bgView)
        self.bgView.addSubview(self.btn_cancel)
        self.bgView.addSubview(self.lab_line)
        self.bgView.snp.makeConstraints { (make) in
            make.width.equalTo(width)
            make.height.equalTo(60)
            make.top.equalTo(120)
            make.left.equalTo(0)
        }
        self.bgView.layer.masksToBounds = true
        self.bgView.layer.cornerRadius = 6

        self.btn_cancel.snp.makeConstraints { (make) in
            make.width.height.equalTo(38)
            make.left.equalTo(self.bgView.snp.left).offset(0)
            make.top.equalTo(self.bgView.snp.top)
        }
        self.btn_cancel.addTarget(self, action: #selector(self.close), for: .touchUpInside)
        self.lab_line.snp.makeConstraints { (make) in
            make.width.equalTo(width)
            make.height.equalTo(1)
            make.left.equalTo(0)
            make.top.equalTo(self.btn_cancel.snp.bottom)
        }
    }

   

    @objc func close(){
        self.isHidden = true
    }

    lazy var bgView : UIView = {
        let view = UIView()
        view.backgroundColor = UIColor.white
        return view
    }()
    lazy var btn_cancel : UIButton = {
        let btn = UIButton()
        btn.setTitleColor(UIColor.gray, for: .normal)
        btn.titleLabel?.font = UIFont.init(name: "iconfont", size: 20)
        btn.setTitle("\u{e606}", for: .normal)
        btn.backgroundColor = UIColor.white
        return btn
    }()
    lazy var lab_line : UILabel = {
        let lab = UILabel()
        lab.backgroundColor = UIColor.colorWithHex(hexColor: 0xf1f1f1)
        return lab
    }()
    let height = UIScreen.main.bounds.height
    let width = UIScreen.main.bounds.width
    var slideMenu:SlideMenu?

}
