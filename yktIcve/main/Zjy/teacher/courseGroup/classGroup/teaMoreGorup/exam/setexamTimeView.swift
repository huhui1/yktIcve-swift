//
//  setexamTimeView.swift
//  云课堂2
//
//  Created by 志辉教育 on 2018/6/26.
//  Copyright © 2018年 zqyou. All rights reserved.
//
import UIKit

class setexamTimeView: UIViewController, UITextFieldDelegate{
    
    override func viewDidLoad() {
        super.viewDidLoad()
        self.text_timeBeginDate.delegate = self
        self.text_timeOverDate.delegate = self
        self.text_checktime.delegate = self
        self.title = "设置时间"
        self.view.backgroundColor = UIColor.colorWithHex(hexColor: 0xf2f2f2)
        self.setUI()
        self.lab_examTitle.attributedText = common.share.setAttributeLine(text: self.examTitle)
        self.getExamTimeInfo()
        // Do any additional setup after loading the view.
    }
    
    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    func textFieldDidBeginEditing(_ textField : UITextField) {
        self.pickStartDate(self.text_timeBeginDate);
        self.pickStartDate(self.text_timeOverDate);
        self.pickStartDate(self.text_checktime)
    }
    
    func setUI(){
        self.view.addSubview(self.lab_examTitle)
        self.view.addSubview(self.lab_timeBegin)
        self.view.addSubview(self.lab_timeOver)
        
        self.view.addSubview(self.text_timeBeginDate)
        self.view.addSubview(self.text_timeOverDate)
        self.view.addSubview(self.text_checktime)
        self.view.addSubview(self.lab_checktime)
        
        self.view.addSubview(self.btn_save)
        self.view.addSubview(self.isForbid)
        self.view.addSubview(self.boottom_view)
        self.boottom_view.addSubview(self.isOnSwitch)
        self.lab_examTitle.snp.makeConstraints { (make) in
            make.width.equalTo(width)
            make.height.equalTo(40)
            make.top.equalTo(self.view.snp.top).offset(4)
        }
        self.lab_timeBegin.snp.makeConstraints { (make) in
            make.width.equalTo(width/2)
            make.height.equalTo(40)
            make.top.equalTo(self.lab_examTitle.snp.bottom).offset(12)
        }
        self.text_timeBeginDate.snp.makeConstraints { (make) in
            make.width.equalTo(width/2)
            make.height.equalTo(40)
            make.top.equalTo(self.lab_examTitle.snp.bottom).offset(12)
            make.left.equalTo(self.lab_timeBegin.snp.right)
        }
        self.lab_timeOver.snp.makeConstraints { (make) in
            make.width.equalTo(width/2)
            make.height.equalTo(40)
            make.top.equalTo(self.lab_timeBegin.snp.bottom).offset(12)
        }
        self.text_timeOverDate.snp.makeConstraints { (make) in
            make.width.equalTo(width/2)
            make.height.equalTo(40)
            make.top.equalTo(self.lab_timeBegin.snp.bottom).offset(12)
            make.left.equalTo(self.lab_timeOver.snp.right)
        }
        self.lab_checktime.snp.makeConstraints { (make) in
            make.width.equalTo(width/2)
            make.height.equalTo(40)
            make.top.equalTo(self.text_timeOverDate.snp.bottom).offset(12)
        }
        self.text_checktime.snp.makeConstraints { (make) in
            make.width.equalTo(width/2)
            make.height.equalTo(40)
            make.top.equalTo(self.text_timeOverDate.snp.bottom).offset(12)
            make.left.equalTo(self.lab_checktime.snp.right)
        }
        self.isForbid.snp.makeConstraints { (make) in
            make.width.equalTo(width-50)
            make.height.equalTo(40)
            make.top.equalTo(self.lab_checktime.snp.bottom).offset(12)
        }
        
        self.boottom_view.snp.makeConstraints { (make) in
            make.width.equalTo(50)
            make.height.equalTo(40)
            make.left.equalTo(self.isForbid.snp.right)
            //make.top.equalTo(self.text_timeOverDate.snp.bottom).offset(12)
            make.centerY.equalTo(self.isForbid.snp.centerY)
        }
        self.isOnSwitch.snp.makeConstraints { (make) in
            make.width.equalTo(50)
            make.height.equalTo(30)
            make.left.equalTo(self.isForbid.snp.right)
            //make.top.equalTo(self.text_timeOverDate.snp.bottom).offset(12)
            make.centerY.equalTo(self.isForbid.snp.centerY)
        }
        let HX = common.share.returnSafeAreaLineHeight()
        self.btn_save.snp.makeConstraints { (make) in
            make.width.equalTo(width)
            make.height.equalTo(40)
            make.bottom.equalTo(self.view.snp.bottom).offset(HX)
        }
    }
  
//    var reloadClosure :(() ->Void)?
    lazy var examTitle:String = {
        return ""
    }()
    lazy var examId:String = {
        return ""
    }()
    lazy var openClassId:String = {
        return ""
    }()
    lazy var examTermTimeId:String = {
        return ""
    }()
    let width = UIScreen.main.bounds.width
    
    
    lazy var lab_examTitle:UILabel = {
        var lab = UILabel()
        lab.font = UIFont.init(name: "iconfont", size: 14)
        lab.textColor = UIColor.gray
        lab.textAlignment = .left
        lab.sizeToFit()
        lab.numberOfLines = 0
        lab.backgroundColor = UIColor.white
        return  lab
    }()
    
    lazy var lab_timeBegin:UILabel = {
        var lab = UILabel()
        lab.font = UIFont.init(name: "iconfont", size: 12)
        lab.textColor = UIColor.black
        lab.text = "  开始时间"
        lab.textAlignment = .left
        lab.backgroundColor = UIColor.white
        return  lab
    }()
    lazy var text_timeBeginDate:UITextField = {
        let text = UITextField()
        text.leftViewMode = .always
        text.textAlignment = NSTextAlignment.right
        text.backgroundColor = UIColor.white
        text.textColor = UIColor.gray
        text.tag = 1
        text.placeholder = "请输入开始时间"
        return text
    }()
    lazy var lab_timeOver:UILabel = {
        var lab = UILabel()
        lab.font = UIFont.init(name: "iconfont", size: 12)
        lab.textColor = UIColor.black
        lab.text = "  结束时间"
        lab.textAlignment = .left
        lab.backgroundColor = UIColor.white
        return  lab
    }()
    lazy var text_timeOverDate:UITextField = {
        let text = UITextField()
        text.leftViewMode = .always
        text.textAlignment = NSTextAlignment.right
        text.backgroundColor = UIColor.white
        text.textColor = UIColor.gray
        text.tag = 2
        text.placeholder = "请输入结束时间"
        return text
    }()
    
    lazy var lab_checktime:UILabel = {
        var lab = UILabel()
        lab.font = UIFont.init(name: "iconfont", size: 12)
        lab.textColor = UIColor.black
        lab.text = "  答案查看时间"
        lab.textAlignment = .left
        lab.backgroundColor = UIColor.white
        return  lab
    }()
    lazy var text_checktime:UITextField = {
        let text = UITextField()
        text.leftViewMode = .always
        text.textAlignment = NSTextAlignment.right
        text.backgroundColor = UIColor.white
        text.textColor = UIColor.gray
        text.tag = 3
        text.placeholder = "请输入答案查看时间"
        return text
    }()
    lazy var isForbid:UILabel = {
        var lab = UILabel()
        lab.font = UIFont.init(name: "iconfont", size: 12)
        lab.textColor = UIColor.black
        lab.text = "  状态(是否开启)"
        lab.textAlignment = .left
        lab.backgroundColor = UIColor.white
        return  lab
    }()
    lazy var boottom_view:UIView = {
        let view = UIView()
        view.backgroundColor = UIColor.white
        return view
    }()
    lazy var isOnSwitch:UISwitch = {
        var  uiswitch = UISwitch()
        uiswitch.backgroundColor = UIColor.white
        uiswitch.isOn = true;
        // 添加监听
        uiswitch.addTarget(self, action: #selector(switchDidChange), for: UIControlEvents.valueChanged)
        return uiswitch
    }()
    lazy var state: Int = {
        return 0
    }()
   @objc func switchDidChange() {
        if(isOnSwitch.isOn){
            state = 0
        }else{
            state = 1
        }
    }
    lazy var btn_save : UIButton = {
        let btn = UIButton()
        btn.contentHorizontalAlignment = UIControlContentHorizontalAlignment.center
        btn.setTitleColor(UIColor.white, for: .normal)
        btn.backgroundColor = UIColor.bg
        btn.setTitle("保存", for: .normal)
        btn.titleLabel?.font = UIFont.init(name: "iconfont", size: 16)
        btn.addTarget(self, action: #selector(self.tap(_ :)), for: .touchUpInside)
        return btn ;
    }()
    //时间选取
    lazy var datePicker :UIDatePicker = {
        let datePicker = UIDatePicker()
        datePicker.locale = Locale(identifier: "zh_CN")
        datePicker.datePickerMode = .dateAndTime
        return datePicker
    }()
}


