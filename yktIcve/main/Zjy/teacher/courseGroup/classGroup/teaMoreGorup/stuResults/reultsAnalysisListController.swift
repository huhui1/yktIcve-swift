//
//  gradeAnalysisListController.swift
//  云课堂-职教云
//
//  Created by zqy on 2018/3/23.
//  Copyright © 2018年 zqy. All rights reserved.
//

import Foundation
import SwiftyJSON
import Alamofire
import SCLAlertView

extension reultsAnalysisListView{
    func getStuScore(){
        XLBallLoading.show(in: self.view)
        let dict = ["courseOpenId":self.courseOpenId,
                    "openClassId":self.openClassId,
                    "stuId":self.stuId]as[String:Any]
        
        Alamofire.request(appAPI.AssistTeacher_getStuScore, method: .post, parameters: dict, encoding: URLEncoding.default).responseJSON { response in
            if let value = response.result.value {
                let json = JSON(value)
                if(json["code"]>0){
                  self.json = json["stuScoreInfo"]

                    self.setTableView()
                    self.setUI()
                  
                }else{
//                    ZKProgressHUD.showError(json["msg"].stringValue);
                    //自定义提示框样式
                    let appearance = SCLAlertView.SCLAppearance( 
                        showCloseButton: false //不显示关闭按钮
                    )
                    //使用自定义样式的提示框
                    let alert = SCLAlertView(appearance: appearance)
                    alert.addButton("确定") {
                        self.navigationController?.popViewController(animated: true)
                    }
                    alert.showInfo("温馨提示！", subTitle: json["msg"].stringValue)
                }
                XLBallLoading.hide(in: self.view)
            }else{
                ZKProgressHUD.showError("网络环境异常请稍后再试！");
                XLBallLoading.hide(in: self.view)
            }
        }

    }
    
    
}
