//
//  zjy_courseware_BBSCell.swift
//  云课堂2
//
//  Created by 尤增强 on 2018/7/3.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit

@objc protocol  zjy_courseware_BBSCellDategate{
    @objc optional func returnBBSModel(m:evaluationModel) -> ()
}
class zjy_courseware_BBSCell: UITableViewCell,ZQStarReteViewDelegate {
  
    @IBOutlet weak var starH: NSLayoutConstraint!
    @IBOutlet weak var viewStar: UIView!
    var evaluationM : evaluationModel!
    @IBOutlet weak var lab_action: UILabel!
    @IBOutlet weak var lab_time: UILabel!
    @IBOutlet weak var lab_Content: UILabel!
    @IBOutlet weak var lab_creator: UILabel!
    var delegate :zjy_courseware_BBSCellDategate!
    override func awakeFromNib() {
        super.awakeFromNib()

        // Initialization code
    }

    override  func  layoutSubviews() {

    }

    func setmodelEvaluation(m:evaluationModel,type:Int){
        self.evaluationM = m
        let starView = ZQStarRateView.init(frame: self.viewStar.frame, starCount: 5, score:m.star)
         starView.isUserInteractionEnabled = false
        self.viewStar.addSubview(starView)
        starView.delegate = self
 
        self.lab_time.text = m.dateCreated
        self.lab_creator.text = m.displayName
        self.lab_action.font = UIFont.init(name: "iconfont", size: 11)
        self.lab_action.text = "回复(\(m.replyCount))"

        if(type == 4){
            let msg = m.isAccept ? "已采纳":"未采纳"
            self.lab_action.text = "\u{e70f}" + msg
            self.lab_action.isUserInteractionEnabled = true
            if m.isAccept {
              self.lab_action.textColor =  UIColor.bg
            }else{
              self.lab_action.textColor =  UIColor.lightGray
            }
            let tap = UITapGestureRecognizer.init(target: self, action: #selector(self.isAccept(_ :)))
            self.lab_action.addGestureRecognizer(tap)
        }
        if(type != 1){
            self.starH.constant = 0
            self.viewStar.isHidden = true
        }
    }

    @objc func isAccept(_ gestureRecognizer: UITapGestureRecognizer){
        
        self.delegate?.returnBBSModel!(m: evaluationM)
    }
    override func setSelected(_ selected: Bool, animated: Bool) {
        super.setSelected(selected, animated: animated)

        // Configure the view for the selected state
    }
    
}
