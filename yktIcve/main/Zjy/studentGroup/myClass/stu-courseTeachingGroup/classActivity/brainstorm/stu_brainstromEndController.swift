//
//  stu_brainstromEndController.swift
//  云课堂-职教云
//
//  Created by cc on 2018/3/16.
//  Copyright © 2018年 zqy. All rights reserved.
//

import UIKit
import SwiftyJSON
import Alamofire


extension stu_brainstromEndView {

    func getBrainStrom(){
        let dict = ["stormId":self.brainStormId,
                    "userId":Account.defaultAccount.id!];
        Alamofire.request(appAPI.FaceTeach_getBrainStormStuInfo, method: .post, parameters: dict, encoding: URLEncoding.default).responseJSON { response in
            if let value = response.result.value {
                let json = JSON(value)
                if json["code"] == 1 {
                    self.json = json
                    self.brainStormInfos.removeAll()
                    for i in  json["brainStormStuList"]{
                        let m =  stuBrainStormInfo.init(data: i.1, _isChecked: false)
                        self.brainStormInfos.append(m)
                    }

                     self.theWebView.evaluateJavaScript("submitstorm.set(\(self.json))", completionHandler: nil)
                }else{
                    ZKProgressHUD.showError(json["msg"].stringValue);
                }
            }else{
                ZKProgressHUD.showError("网络环境异常请稍后再试！");
            }
            
        }
        
        
    }
    
}
