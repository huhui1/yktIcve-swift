//
//  brainstromInfoCell.swift
//  云课堂2
//
//  Created by 尤增强 on 2018/7/30.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit

@objc protocol brainstromInfoCellDelegate{

    /// 图片点击返回url
    ///
    /// - Parameter str: 图片URL
    /// - Returns: 空
    @objc optional func brainstrom_backImgUrl(str:String) -> ()

    /// 返回下标与操作类型
    ///
    /// - Parameters:
    ///   - _index: 数据下标
    ///   - _type: 1 选择 2 评分
    /// - Returns: null
    @objc optional func returnIndex(_index:Int,_type:Int)-> ()

}
class brainstromInfoCell: UICollectionViewCell {
    @IBOutlet weak var cellheadView: UIView!
    
    @IBOutlet weak var bgView: UIView!
    @IBOutlet weak var btn_checked: UIButton!

    var bgColor = [0x2acb73,0x32cbcc,0x65aeed,0xb1d732,0xf2f2f2,0xf2f2f2]
    @IBOutlet weak var imgItem: UIImageView!
    @IBOutlet weak var lab_content: UILabel!
    @IBOutlet weak var btn_socre: UIButton!
    @IBOutlet weak var lab_stuName: UILabel!
    var model :stuBrainStormInfo?
    var deletgate:brainstromInfoCellDelegate?
    override func awakeFromNib() {
        super.awakeFromNib()
        self.setUIIconFont()
        // Initialization code
    }
    var _index = 0
    @IBAction func checkAction(_ sender: UIButton) {

        sender.isSelected = !sender.isSelected
        self.deletgate?.returnIndex!(_index: _index, _type: 1)

    }
    @IBAction func setSorceAction(_ sender: UIButton) {

        self.deletgate?.returnIndex!(_index: _index, _type: 2)

    }

     func setUIIconFont() {
        self.btn_socre.setTitle("\u{e67c}", for:.normal)
        self.btn_socre.setTitleColor(UIColor.white, for: .normal)
        self.btn_socre.setTitleColor(UIColor.white, for: .selected)
        self.btn_socre.titleLabel?.font = UIFont.init(name: "iconfont", size: 15)

        self.btn_checked.setTitle("\u{e6f5}", for:.normal)
        self.btn_checked.setTitle("\u{e6dc}", for:.selected)
        self.btn_checked.setTitleColor(UIColor.white, for: .normal)
        self.btn_checked.setTitleColor(UIColor.white, for: .selected)
        self.btn_checked.titleLabel?.font = UIFont.init(name: "iconfont", size: 26)
        
        let gesTap = UITapGestureRecognizer.init(target: self, action: #selector(self.touchImg))
        self.imgItem.isUserInteractionEnabled = true
        self.imgItem.addGestureRecognizer(gesTap)

    }

    @objc func  touchImg (){

        self.deletgate?.brainstrom_backImgUrl!(str: (model?.docOssPreview)!)

    }
    func setDataForUI(m:stuBrainStormInfo,_index :Int,_isStu:Bool){

        self.btn_checked.isHidden = _isStu
        self.btn_checked.isSelected = m.isChecked
        self._index = _index
        self.model = m
        self.lab_stuName.text = m.Name
        self.lab_content.text = m.Content
        if(!m.docOssPreview.isEmpty){
            common.share.setSDImg(str: m.docPreview, imgview: self.imgItem)
        }
        self.cellheadView.backgroundColor =  UIColor.colorWithHex(hexColor: Int64(self.bgColor[_index % 6]))
       self.bgView.backgroundColor = UIColor.colorWithHex(hexColor: Int64(self.bgColor[_index % 6]))

        self.btn_socre.isSelected = m.isScore
        self.btn_socre.setTitle("\u{e67c}\(m.PerformanceScore)", for:.selected)

    }

}
