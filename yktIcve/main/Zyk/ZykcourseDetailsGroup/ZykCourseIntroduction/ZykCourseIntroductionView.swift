//
//  ZykCourseIntroductionView.swift
//  云课堂2
//  课程简介
//  Created by 志辉教育 on 2018/7/2.
//  Copyright © 2018年 zqyou. All rights reserved.
//
import UIKit
import Alamofire
import SwiftyJSON

class ZykCourseIntroductionView: UIViewController,UITextViewDelegate {
    
    override func viewDidLoad() {
        super.viewDidLoad()
        self.view.backgroundColor = UIColor.white
        self.setUI()
//        self.getCourseIntroduction()
       
        // Do any additional setup after loading the view.
        
    }
    
    override func didReceiveMemoryWarning() {
        super.didReceiveMemoryWarning()
        // Dispose of any resources that can be recreated.
    }
    func setUI(){
//        self.scrollView.frame = self.view.frame
//        self.scrollView.delegate = self
//        self.view.addSubview(scrollView)
//        //隐藏滚动条
//        scrollView.showsVerticalScrollIndicator = false
//        scrollView.showsHorizontalScrollIndicator = false
//        self.scrollView.addSubview(self.referenceContent)
//        self.referenceContent.font = UIFont.systemFont(ofSize: 14)
//        self.referenceContent.textColor = UIColor.gray
//        self.referenceContent.snp.makeConstraints { (make) in
//            make.width.equalTo(UIScreen.main.bounds.width)
//            make.top.equalTo(10)
//            make.left.equalTo(0)
//        }

        self.textView.frame = CGRect.init(x: 0, y: 0, width: width, height: height - 300)
        self.view.addSubview(self.textView)
        self.textView.delegate = self
        self.textView.isEditable = false
    }
    
    func setContentdata(){
//        let paraph = NSMutableParagraphStyle()
//        paraph.lineSpacing  = 5
//        paraph.headIndent = 10
//        paraph.firstLineHeadIndent = 20
//        let attributes = [NSAttributedStringKey.font:UIFont.init(name: "Helvetica-Light", size: 15),
//                          NSAttributedStringKey.paragraphStyle: paraph]
//        //判断html正则表达式
//        let pattern = "[\\ud83c\\udc00-\\ud83c\\udfff]|[\\ud83d\\udc00-\\ud83d\\udfff]|[\\u2600-\\u27ff]|<p>|</p>|&nbsp;|</strong>|<br/>|<strong>"
//        let str = self.list["CourseDes"].stringValue.pregReplace(pattern: pattern, with: "")
//        self.textView.attributedText = NSAttributedString(string:str,attributes:attributes)
//        self.textView.textColor = UIColor.colorWithHex(hexColor: 0x8F8F8F)
//        let referencehigh = (common.share.getHeightForView(text: self.referenceContent.attributedText!, font: UIFont.italicSystemFont(ofSize: 14), width: width))
//        if referencehigh > height - 310 {
//            self.scrollView.contentSize = CGSize.init(width: width, height: referencehigh + 350)
//        }
    }
    
    let width = UIScreen.main.bounds.width
    let height = UIScreen.main.bounds.height
//    lazy var scrollView :UIScrollView = {
//        let scrollView = UIScrollView.init(frame: self.view.bounds)
//        return scrollView
//    }()
//
//    lazy var referenceContent : UILabel = {
//        let lab = UILabel()
//        lab.backgroundColor = UIColor.white
//        lab.numberOfLines = 0
//        lab.sizeToFit();
//        return lab
//    }()
    lazy var textView : UITextView = {
        let view = UITextView()
       
        return view
    }()
//    var ZykCourseKjModel: ZykCourseKjModel!
    lazy var courseId:String = ""
    lazy var list : JSON =  {
        return []
    }()
    var content : String = ""{
        willSet
        {
            
        }
        didSet
        {
            let paraph = NSMutableParagraphStyle()
            paraph.lineSpacing  = 5
            paraph.headIndent = 10
            paraph.firstLineHeadIndent = 20
            let attributes = [NSAttributedStringKey.font:UIFont.init(name: "Helvetica-Light", size: 14),
                              NSAttributedStringKey.paragraphStyle: paraph]
            //判断html正则表达式
            let pattern = "[\\ud83c\\udc00-\\ud83c\\udfff]|[\\ud83d\\udc00-\\ud83d\\udfff]|[\\u2600-\\u27ff]|<p>|</p>|&nbsp;|</strong>|<br/>|<strong>"
            let str = self.content.pregReplace(pattern: pattern, with: "")
            if str == ""{
                self.textView.attributedText = NSAttributedString(string:"暂无简介",attributes:attributes)
            }else{
//                self.textView.attributedText = NSAttributedString(string:str,attributes:attributes)
                self.textView.attributedText = common.share.loadHtml(str: self.content)
                self.textView.textColor = UIColor.gray
                self.textView.font = UIFont.init(name: "Helvetica-Light", size: 14)
            }
            
            self.textView.textColor = UIColor.colorWithHex(hexColor: 0x8F8F8F)
            
        }
    }
}


