//
//  ZykAllProfessionController.swift
//  云课堂2
//
//  Created by cc on 2018/7/3.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit
import SwiftyJSON
import Alamofire

extension ZykAllProfessionView{
    func getAllProfession(){
        let dict = ["token":Account.defaultAccount.token!]
        XLBallLoading.show(in: self.view)
        Alamofire.request(ZYKAPI.projectmanage_project, method: .post, parameters: dict, encoding: URLEncoding.default).responseJSON { response in
            if let value = response.result.value {
                let r = JSON(value);
                if r["code"] == 1{
                      let m1 = ProfessionModel.init(_list: r["govList"].arrayValue)
                      m1.isUnfold = true
                      let m2 = ProfessionModel.init(_list: r["schoolList"].arrayValue)
                      let m3 = ProfessionModel.init(_list: r["xhList"].arrayValue)
                      let m4 = ProfessionModel.init(_list: r["qyList"].arrayValue)
                      let m5 = ProfessionModel.init(_list: r["sjList"].arrayValue)
                        self.list.append(m1)
                        self.list.append(m2)
                        self.list.append(m3)
                        self.list.append(m4)
                        self.list.append(m5)
                    self.collectionView.reloadData()
                }else{
                    ZKProgressHUD.showMessage("网络异常请稍后再试！");
                }
                XLBallLoading.hide(in: self.view)
            }else{
                 ZKProgressHUD.showMessage("网络异常请稍后再试！");
                 XLBallLoading.hide(in: self.view)
            }
        }
    }
}
