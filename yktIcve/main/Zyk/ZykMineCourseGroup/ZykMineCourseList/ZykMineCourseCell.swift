//
//  ZykMineCourseCell.swift
//  云课堂2
//
//  Created by cc on 2018/7/2.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit
import SwiftyJSON

class ZykMineCourseCell: UITableViewCell {

    override func awakeFromNib() {
        super.awakeFromNib()
        // Initialization code
    }

    override func setSelected(_ selected: Bool, animated: Bool) {
        super.setSelected(selected, animated: animated)

        // Configure the view for the selected state
    }
    
    required init?(coder aDecoder:NSCoder) {
        super.init(coder: aDecoder)
    }
    
    override init(style:UITableViewCellStyle, reuseIdentifier:String?) {
        
        super.init(style: style, reuseIdentifier: reuseIdentifier);
        
        self.setUI()
    }
    
    func setUI(){
        self.addSubview(self.thumbnail)
        self.addSubview(self.lab_Name)
        self.addSubview(self.lab_Hours)
        self.addSubview(self.progressBar)
        self.addSubview(self.lab_Progress)
        self.addSubview(self.lab_line)
        self.addSubview(self.lab_Complete)
        self.thumbnail.snp.makeConstraints { (make) in
            make.width.equalTo(150)
            make.height.equalTo(84)
            make.top.equalTo(10)
            make.left.equalTo(12)
        }
        self.thumbnail.layer.masksToBounds = true
        self.thumbnail.layer.cornerRadius = 6
        self.thumbnail.layer.borderColor = UIColor.gray.cgColor
        self.thumbnail.layer.borderWidth = 0.08
        
        self.lab_Name.snp.makeConstraints{ (make) in
            make.width.equalTo(width - 182)
            make.height.equalTo(33)
            make.top.equalTo(12)
            make.left.equalTo(self.thumbnail.snp.right).offset(12)
        }
        self.lab_Hours.snp.makeConstraints{ (make) in
            make.width.equalTo(width - 182)
            make.height.equalTo(15)
            make.top.equalTo(self.lab_Name.snp.bottom).offset(15)
            make.left.equalTo(self.thumbnail.snp.right).offset(12)
        }
        self.progressBar.snp.makeConstraints{ (make) in
            make.width.equalTo(width - 235)
            make.height.equalTo(6)
            make.top.equalTo(self.lab_Hours.snp.bottom).offset(10)
            make.left.equalTo(self.thumbnail.snp.right).offset(12)
        }
        self.progressBar.layer.masksToBounds = true
        self.progressBar.layer.cornerRadius = 3
        self.progressBar.layer.borderColor = UIColor.bg.cgColor
        self.progressBar.layer.borderWidth = 0.4
        
        self.lab_Progress.snp.makeConstraints{ (make) in
            make.width.equalTo(60)
            make.height.equalTo(15)
            make.centerY.equalTo(self.progressBar.snp.centerY)
            make.left.equalTo(self.progressBar.snp.right).offset(10)
        }
        
        self.lab_Complete.snp.makeConstraints{ (make) in
            make.width.equalTo(40)
            make.height.equalTo(40)
            make.centerY.equalTo(self.lab_Hours.snp.centerY)
            make.right.equalTo(self.snp.right).offset(-17)
        }
        self.lab_Complete.layer.masksToBounds = true
        self.lab_Complete.layer.cornerRadius = 20
        
        self.lab_line.snp.makeConstraints { (make) in
            make.width.equalTo(width - 172)
            make.height.equalTo(1)
            make.right.equalTo(self.snp.right).offset(-10)
            make.bottom.equalTo(self.snp.bottom)
        }
    }
    
    func setCell(data:JSON,state:Int){
        if state == 0{
            self.lab_Complete.isHidden = true
            self.lab_Progress.isHidden = false
            self.progressBar.isHidden = false
        }else{
            self.lab_Progress.isHidden = true
            self.progressBar.isHidden = true
            self.lab_Complete.isHidden = false
        }
        self.lab_Name.text = data["title"].stringValue
        self.lab_Hours.text = "学时：\(data["studyhours"].stringValue)"
        self.lab_Progress.text = "\(data["schedule"].stringValue)%"
        common.share.setSDImg(str: data["cover"].stringValue, imgview: self.thumbnail)
        self.progressBar.progress = Float(data["schedule"].floatValue/100)
    }
    
    lazy var thumbnail:UIImageView = {
        let img = UIImageView()
        return img
    }()
    
    lazy var lab_Name:UILabel = {
        let lab = UILabel()
        lab.numberOfLines = 2
        lab.font = UIFont.init(name: "Helvetica", size: 14)
        lab.textColor = UIColor.colorWithHex(hexColor: 0x333232)
        lab.backgroundColor = UIColor.white
        return lab
    }()
    
    lazy var lab_Hours:UILabel = {
        let lab = UILabel()
        lab.font = UIFont.init(name: "Helvetica-Light", size: 13)
        lab.textColor = UIColor.colorWithHex(hexColor: 0x808080)
        lab.backgroundColor = UIColor.white
        return lab
    }()
    lazy var progressBar : UIProgressView = {
        let progress = UIProgressView()
        progress.progress = 0
        progress.setProgress(0.8, animated: true)
        progress.progressTintColor = UIColor.bg
//        progress.trackTintColor = UIColor.colorWithHex(hexColor: 0xE0E0E0)
        progress.trackTintColor = UIColor.white
        return progress
    }()
    lazy var lab_Progress : UILabel = {
        let lab = UILabel()
        lab.font = UIFont.init(name: "Helvetica-Light", size: 12)
        lab.textColor = UIColor.bg
        lab.backgroundColor = UIColor.white
        return lab
    }()
    lazy var lab_line : UILabel = {
        let lab = UILabel()
        lab.backgroundColor = UIColor.colorWithHex(hexColor: 0xE0E0E0)
        return lab
    }()
    lazy var lab_Complete : UILabel = {
        let lab = UILabel()
        lab.textColor = UIColor.colorWithHex(hexColor: 0x8F8F8F)
        lab.backgroundColor = UIColor.white
        lab.text = "\u{e72d}"
        lab.font = UIFont.init(name: "iconfont", size: 43)
        lab.textAlignment = .center
        return lab
    }()
    
    let width = UIScreen.main.bounds.width
}




