//
//  ZQNavigationMenuView.swift
//  云课堂2
//
//  Created by 志辉教育 on 2018/5/30.
//  Copyright © 2018年 zqyou. All rights reserved.
//

import UIKit

@objc protocol ZQNavigationMenuViewDelegate{
    //返回下标
    @objc optional func getIndex(_index:Int) -> ()
}
class ZQNavigationMenuView: UIView,UITableViewDelegate,UITableViewDataSource {
    
    
    var delegate:ZQNavigationMenuViewDelegate?
    init(frame: CGRect,titles:Array<String>) {
        super.init(frame: frame)
        self.clipsToBounds = true
        self._titles = titles
        self.backgroundColor = UIColor.white
        self.layer.shadowColor = UIColor.colorWithHex(hexColor: 0x68696e).cgColor
        self.layer.shadowOpacity = 1
        self.layer.shadowRadius = 4
        self.layer.shadowOffset = CGSize(width: 2, height: 2)
        self.backgroundColor = UIColor.white
        self.createStarView()
    }
    
    fileprivate func createStarView(){
        self.tableView = UITableView.init(frame: CGRect.init(x: 0, y: 0, width: self.frame.size.width, height: self.frame.size.height));
        self.tableView.register(UITableViewCell.self, forCellReuseIdentifier: "swiftCell")
        self.tableView.delegate = self
        self.tableView.dataSource = self
        //去除尾部多余的空行
        self.tableView.backgroundColor = UIColor.white
        self.tableView.tableFooterView = UIView(frame:CGRect.zero)
        self.addSubview( self.tableView)
    }
    
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat
    {
        return 40;
    }
    
    //返回表格行数（也就是返回控件数）
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        
        return self._titles.count;
    }
    
    //创建各单元显示内容(创建参数indexPath指定的单元）
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath)
        -> UITableViewCell {
            
            let cell = tableView.dequeueReusableCell(withIdentifier: "swiftCell",
                                                     for: indexPath)
            cell.textLabel?.text = self._titles[indexPath.row]
            cell.textLabel?.textColor = UIColor.gray
            cell.textLabel?.font = UIFont.italicSystemFont(ofSize: 18)
            return cell
    }
    
    func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
        self.delegate?.getIndex!(_index: indexPath.row)
    }
    
    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
    
    fileprivate var tableView:UITableView!
    fileprivate var _titles:Array<String>!
}
